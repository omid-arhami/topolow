% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils.R
\name{sanity_check_subsample}
\alias{sanity_check_subsample}
\title{Sanity Check for Subsampled Data Before Optimization}
\usage{
sanity_check_subsample(
  subsampled_matrix,
  folds = 20,
  min_points_per_fold = 3,
  min_measurements_per_fold = 3,
  verbose = TRUE
)
}
\arguments{
\item{subsampled_matrix}{Matrix. The subsampled dissimilarity matrix to check.}

\item{folds}{Integer. Number of cross-validation folds that will be used.}

\item{min_points_per_fold}{Integer. Minimum number of data points expected
per fold. Default: 5.}

\item{min_measurements_per_fold}{Integer. Minimum number of measurements
per fold. Default: 10.}

\item{verbose}{Logical. Print detailed diagnostic messages. Default: TRUE.}
}
\value{
A list with check results:
\item{all_checks_passed}{Logical. TRUE if all checks passed.}
\item{checks}{List of individual check results (logical values).}
\item{diagnostics}{List of diagnostic values calculated.}
\item{warnings}{Character vector of warning messages (empty if no warnings).}
}
\description{
Validates that a subsampled dissimilarity matrix has sufficient data for
reliable parameter optimization with cross-validation. We need enough ground
truth in each fold to be able to compare the predictions with them with high
confidence.
}
\details{
The function performs these checks:
\itemize{
\item \strong{Sufficient points}: At least 2x folds points in total
\item \strong{Sufficient measurements}: At least folds x min_measurements_per_fold
\item \strong{Adequate points per fold}: Average points per fold >= min_points_per_fold
\item \strong{Adequate measurements per fold}: Average measurements per fold >= min_measurements_per_fold
\item \strong{Not too sparse}: Overall sparsity < 95\%
}

If checks fail, warnings are issued but execution continues. This allows the
user to proceed with awareness of potential issues.
}
\examples{
# Create a small matrix
small_mat <- matrix(c(0, 1, 2, 1, 0, 1.5, 2, 1.5, 0), nrow = 3)

# Check with 5 folds (will fail - too few points)
result <- sanity_check_subsample(small_mat, folds = 5)
print(result$all_checks_passed)
print(result$warnings)

# Create a larger connected matrix
n <- 50
coords <- matrix(rnorm(n * 2), ncol = 2)
large_mat <- as.matrix(dist(coords))

# Check with 10 folds (should pass)
result <- sanity_check_subsample(large_mat, folds = 10)
print(result$all_checks_passed)

}
